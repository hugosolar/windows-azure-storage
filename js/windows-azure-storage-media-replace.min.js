function generateCacheVar(e){for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",i=0;i<e;i++){t+=a[Math.floor(Math.random()*a.length)]}return t}var replaceMedia=function(a){var t;t||(t=wp.media.frames.file_frame=wp.media({title:AzureMediaReplaceObject.i18n.title,frame:"select",button:{text:AzureMediaReplaceObject.i18n.replaceMediaButton},multiple:!1}).on("select",function(){var e=t.state().get("selection").first().toJSON();jQuery.ajax({type:"post",url:AzureMediaReplaceObject.ajaxUrl,data:{action:"azure-storage-media-replace",current_attachment:a,nonce:AzureMediaReplaceObject.nonce,replace_attachment:e.id},dataType:"JSON",beforeSend:function(){jQuery(".settings-save-status").find(".spinner").addClass("is-active")},success:function(e){jQuery(".settings-save-status").find(".spinner").removeClass("is-active");var a=jQuery(".media-modal").find(".details-image").attr("src"),t=generateCacheVar(7);jQuery(".media-modal").find(".details-image").attr("src",a+"?v="+t);var i=a;e.meta_data.sizes.medium.length?i=e.meta_data.sizes.medium:e.meta_data.sizes.thumbnail.length&&(i=e.meta_data.sizes.thumbnail),jQuery(".attachments-wrapper").find('li[data-id="'+e.ID+'"]').find("img").first().attr("src",i+"?v="+t),jQuery(".attachments-wrapper").find('li[data-id="'+e.old_ID+'"]').remove()}})})).on("open",function(){var e=document.getElementById("menu-item-upload");document.getElementById("menu-item-browse").style.display="none",e.click()}),t.open()};